<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Encanto Festas - Locação de Brinquedos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;800&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        html, body {
            overflow-x: hidden;
            width: 100%;
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
            scroll-behavior: smooth;
        }
        h1, h2, h3, h4, .brand-font {
            font-family: 'Baloo 2', cursive;
        }
        .min-h-screen-safe {
            min-height: 100vh;
            min-height: 100dvh;
        }
        .bg-primary { background-color: #2563EB; }
        .text-primary { color: #2563EB; }
        .bg-secondary { background-color: #FACC15; }
        .text-secondary { color: #CA8A04; }
        
        #bottom-nav {
            padding-bottom: env(safe-area-inset-bottom);
            height: calc(4rem + env(safe-area-inset-bottom));
        }
        .floating-fab {
            box-shadow: 0 4px 15px rgba(250, 204, 21, 0.4);
            transition: all 0.3s ease;
        }

        .nav-item-active {
            color: #2563EB;
            pointer-events: none;
            cursor: default;
        }

        #custom-popup {
            transform: translateY(100%);
            transition: transform 0.6s cubic-bezier(0.32, 0.72, 0, 1);
        }
        body.popup-open #custom-popup {
            transform: translateY(0);
        }
        body.popup-open {
            overflow: hidden;
        }
        .popup-overlay {
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }
        body.popup-open .popup-overlay {
            opacity: 1;
            pointer-events: auto;
        }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2563EB;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-700 min-h-screen-safe flex flex-col">

    <!-- CABEÇALHO PRINCIPAL -->
    <header class="fixed top-0 left-0 right-0 w-full bg-primary shadow-md z-40 h-16">
        <div class="max-w-7xl mx-auto px-4 h-full flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.href='index.html'">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdX7GkygoIKwK06MzeweiE0GPt5I1rsz808w&s" 
                    alt="Logo Encanto Festas" 
                    class="w-10 h-10 rounded-full border-2 border-secondary object-cover shadow-inner">
                <span class="text-white text-2xl font-bold brand-font tracking-wide">Encanto<span class="text-yellow-300">Festas</span></span>
            </div>
            
            <button class="text-white p-2 relative rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M10.268 21a2 2 0 0 0 3.464 0"/><path d="M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326"/></svg>
                <span class="absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full border border-primary"></span>
            </button>
        </div>
    </header>

    <!-- CONTEÚDO DA PÁGINA (LIMPO) -->
    <main class="flex-grow w-full pt-16 pb-28 px-4 bg-gray-50">
        <!-- Área disponível para edição posterior -->
    </main>

    <!-- OVERLAY DO POPUP -->
    <div class="popup-overlay fixed inset-0 bg-black/60 z-[55]" onclick="togglePopup()"></div>

    <!-- POPUP CENTRAL DINÂMICO -->
    <div id="custom-popup" class="fixed inset-x-0 bottom-0 z-[60] bg-white rounded-t-[2.5rem] shadow-2xl h-[92vh] overflow-y-auto">
        <div class="sticky top-0 bg-white pt-4 pb-2 z-10" onclick="togglePopup()">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto cursor-pointer"></div>
        </div>
        <div id="popup-content-area" class="px-6 pb-12">
            <div class="flex flex-col items-center justify-center py-20 text-gray-400">
                <div class="loader mb-4"></div>
                <p class="brand-font">Carregando experiência...</p>
            </div>
        </div>
    </div>

    <!-- BARRA DE NAVEGAÇÃO INFERIOR -->
    <nav id="bottom-nav" class="fixed bottom-0 left-0 right-0 w-full bg-white border-t border-gray-100 z-50 flex items-start md:hidden">
        <div class="grid grid-cols-5 w-full h-full">
            <a href="index.html" class="flex flex-col items-center justify-center nav-item-active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
                <span class="text-[10px] font-bold mt-1">Início</span>
            </a>
            
            <a href="parceiros.html" class="flex flex-col items-center justify-center text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m11 17 2 2a1 1 0 1 0 3-3"/><path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"/><path d="m21 3 1 11h-2"/><path d="M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"/><path d="M3 4h8"/></svg>
                <span class="text-[10px] mt-1">Parceiros</span>
            </a>

            <div class="relative flex justify-center">
                <button onclick="togglePopup()" class="floating-fab absolute -top-6 bg-secondary text-blue-900 w-14 h-14 rounded-full flex items-center justify-center border-4 border-gray-50 active:scale-90">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                </button>
            </div>

            <a href="catalogo.html" class="flex flex-col items-center justify-center text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M12 7v14"/><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>
                <span class="text-[10px] mt-1">Catálogo</span>
            </a>

            <a href="perfil.html" class="flex flex-col items-center justify-center text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                <span class="text-[10px] mt-1">Perfil</span>
            </a>
        </div>
    </nav>

    <script>
        const CENTRAL_POPUP_URL = 'popup-central.html'; 
        let isPopupLoaded = false;

        async function togglePopup() {
            const body = document.body;
            const contentArea = document.getElementById('popup-content-area');

            if (!body.classList.contains('popup-open')) {
                if (!isPopupLoaded) {
                    try {
                        const response = await fetch(CENTRAL_POPUP_URL);
                        if (response.ok) {
                            const html = await response.text();
                            contentArea.innerHTML = html;
                            isPopupLoaded = true;
                        } else { throw new Error(); }
                    } catch (e) {
                        contentArea.innerHTML = `
                            <div class="text-center py-20 text-red-500">
                                <p class="font-bold">Não foi possível carregar o menu central.</p>
                                <button onclick="isPopupLoaded=false; togglePopup()" class="mt-4 text-primary underline">Tentar novamente</button>
                            </div>`;
                    }
                }
                body.classList.add('popup-open');
            } else {
                body.classList.remove('popup-open');
            }
        }
    </script>

</body>
</html>
